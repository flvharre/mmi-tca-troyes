import{s as i,j as s}from"./supabaseClient.Dr4kaC94.js";import{r as u}from"./index.RH_Wq4ov.js";function b(){const[l,o]=u.useState([]),[d,f]=u.useState(null);u.useEffect(()=>{(async()=>{const{data:{session:n}}=await i.auth.getSession(),a=n?.user?.id??null;f(a),a&&await c()})();const{data:r}=i.auth.onAuthStateChange((n,a)=>{const p=a?.user?.id??null;f(p),p?c():o([])}),t=()=>{d&&c()};return window.addEventListener("favoriteAdded",t),()=>{r.subscription.unsubscribe(),window.removeEventListener("favoriteAdded",t)}},[d]);async function c(){const{data:e,error:r}=await i.from("favorites").select("*").order("created_at",{ascending:!1});!r&&e&&o(e)}async function v(e){const{error:r}=await i.from("favorites").delete().eq("id",e);r||o(t=>t.filter(n=>n.id!==e))}function m(e){navigator.clipboard.writeText(e),alert("SVG copiÃ© !")}return d?l.length===0?s.jsx("p",{children:"Aucun favori enregistrÃ©."}):s.jsx("div",{className:"grid gap-3",children:l.map(e=>s.jsxs("div",{className:"border border-green-700 rounded p-3 bg-black",children:[s.jsx("div",{className:"mb-2 max-h-40 overflow-auto",dangerouslySetInnerHTML:{__html:e.svg}}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>m(e.svg),className:"bg-green-700 px-3 py-1 rounded",children:"Copier"}),s.jsx("button",{onClick:()=>v(e.id),className:"bg-red-900 px-3 py-1 rounded",children:"ðŸ—‘ Supprimer"})]})]},e.id))}):s.jsx("p",{children:"Connectez-vous pour voir vos favoris."})}export{b as default};
