import{s as i,j as t}from"./supabaseClient.Dr4kaC94.js";import{r as o}from"./index.RH_Wq4ov.js";const b="https://ryfsbluxhytxrtopxaqi.supabase.co/functions/v1/generate-avatar";function m(){const[e,d]=o.useState(null),[a,n]=o.useState(!1),[s,c]=o.useState(null);o.useEffect(()=>{(async()=>{const{data:{session:u}}=await i.auth.getSession();c(u?.user??null),n(!1)})();const{data:l}=i.auth.onAuthStateChange((u,g)=>{c(g?.user??null)});return()=>{l.subscription.unsubscribe()}},[]);async function p(){n(!0),d(null);const l=await(await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).json();d(l.svg),n(!1)}function f(){e&&navigator.clipboard.writeText(e)}const x=async()=>{if(s)try{const{error:r}=await i.from("favorites").insert({user_id:s.id,svg:e});if(r)throw r;window.dispatchEvent(new CustomEvent("favoriteAdded"))}catch(r){console.error(r),alert("Erreur lors de l'ajout en favoris")}};return t.jsxs("div",{className:"retro-block",style:{backgroundColor:"#706fd3",border:"4px solid #ffda79",borderRadius:"8px",padding:"20px",color:"#ffda79"},children:[t.jsx("h2",{style:{color:"#ffda79",fontSize:"1.5rem",marginBottom:"15px",textTransform:"uppercase",fontWeight:"bold",letterSpacing:"1px"},children:"üé® G√©n√©rateur d'avatars"}),t.jsxs("div",{className:"avatar-container",style:{backgroundColor:"#40407a",border:"4px solid #ffda79",borderRadius:"8px",height:"160px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto",padding:"20px",marginBottom:"20px",imageRendering:"pixelated"},children:[a&&t.jsx("p",{style:{color:"#ffda79"},children:"‚è≥ G√©n√©ration..."}),!a&&e&&t.jsx("div",{dangerouslySetInnerHTML:{__html:e}}),!a&&!e&&t.jsx("p",{style:{color:"#ffda79"},children:"Aucun avatar g√©n√©r√©"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:p,style:{backgroundColor:"#ff5252",color:"white",border:"none",padding:"12px 24px",fontFamily:"Courier New, monospace",fontSize:"14px",cursor:"pointer",borderRadius:"4px",transition:"all 0.3s",boxShadow:"0 4px 0 #b33939",textTransform:"uppercase",fontWeight:"bold"},onMouseOver:r=>{r.currentTarget.style.backgroundColor="#ff3838",r.currentTarget.style.transform="translateY(2px)",r.currentTarget.style.boxShadow="0 2px 0 #b33939"},onMouseOut:r=>{r.currentTarget.style.backgroundColor="#ff5252",r.currentTarget.style.transform="translateY(0px)",r.currentTarget.style.boxShadow="0 4px 0 #b33939"},children:"G√©n√©rer un avatar"}),e&&t.jsx("button",{onClick:f,style:{backgroundColor:"#33d9b2",color:"white",border:"none",padding:"12px 24px",fontFamily:"Courier New, monospace",fontSize:"14px",cursor:"pointer",borderRadius:"4px",transition:"all 0.3s",boxShadow:"0 4px 0 #26a085",textTransform:"uppercase",fontWeight:"bold"},onMouseOver:r=>{r.currentTarget.style.backgroundColor="#2bcca7",r.currentTarget.style.transform="translateY(2px)",r.currentTarget.style.boxShadow="0 2px 0 #26a085"},onMouseOut:r=>{r.currentTarget.style.backgroundColor="#33d9b2",r.currentTarget.style.transform="translateY(0px)",r.currentTarget.style.boxShadow="0 4px 0 #26a085"},children:"Copier le SVG"}),e&&(s?t.jsx("button",{onClick:x,disabled:!e,style:{backgroundColor:"#ffb142",color:"white",border:"none",padding:"12px 24px",fontFamily:"Courier New, monospace",fontSize:"14px",cursor:"pointer",borderRadius:"4px",transition:"all 0.3s",boxShadow:"0 4px 0 #d49132",textTransform:"uppercase",fontWeight:"bold"},onMouseOver:r=>{r.currentTarget.style.backgroundColor="#ffa726",r.currentTarget.style.transform="translateY(2px)",r.currentTarget.style.boxShadow="0 2px 0 #d49132"},onMouseOut:r=>{r.currentTarget.style.backgroundColor="#ffb142",r.currentTarget.style.transform="translateY(0px)",r.currentTarget.style.boxShadow="0 4px 0 #d49132"},children:"‚≠ê Favori"}):t.jsx("p",{style:{color:"#ffda79",alignSelf:"center",fontSize:"14px",fontStyle:"italic"},children:"Connectez-vous pour sauvegarder"}))]})]})}export{m as default};
